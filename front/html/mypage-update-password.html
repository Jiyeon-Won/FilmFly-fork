<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>FilmFly</title>
  <!-- 부트스트랩 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
        crossorigin="anonymous">
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <!-- 공통 헤더 -->
  <script src="../js/common.js"></script>
  <!-- Font Awesome -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

  <link rel="stylesheet" href="../css/reset.css">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
<div class="container">
  <!-- 공통 헤더 -->
  <header id="common-header"></header>

  <div class="mt-5">
    <h2 class="mb-3">비밀번호 변경</h2>
      <div class="mb-3">
        <label for="password" class="form-label">새 비밀번호</label>
        <input type="password" class="form-control" id="password" placeholder="새 비밀번호 입력">
      </div>
      <div class="mb-3">
        <label for="passwordCheck" class="form-label">새 비밀번호 재입력</label>
        <input type="password" class="form-control" id="passwordCheck" placeholder="새 비밀번호 재입력">
      </div>
      <button type="button" class="btn btn-primary mb-3" onclick="submitForm()">수정</button>
    </form>
  </div>
</div>

<script>
  function submitForm() {
    const formData = new FormData();
    const password = $('#password').val();
    const passwordCheck = $('#passwordCheck').val();

    // TODO 로딩됐을 때와 비교를 해야됨
    if (password || passwordCheck) {
      if (password === passwordCheck) {
        formData.append('password', password);
      } else {
        alert('변경할 비밀번호가 일치하지 않습니다.');
        return;
      }
    } else {
      alert('값을 입력해주세요.');
      return;
    }

    // FormData 내용을 확인
    // for (let [key, value] of formData.entries()) {
    //   console.log(key, value);
    // }

    // $.ajax({
    //   url: '/api/update-profile',
    //   type: 'POST',
    //   data: formData,
    //   processData: false,
    //   contentType: false,
    //   enctype : 'multipart/form-data'
    // })
    // .done(function (result, status, xhr) {
    // })
    // .fail(function (xhr, status, er) {
    // });
  }
</script>
</body>
</html>